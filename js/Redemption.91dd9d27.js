(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Redemption","chunk-2d0c2308"],{2555:function(t,e,i){"use strict";i("dfd6")},"32a5":function(t,e,i){"use strict";i("c8c5")},"332e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"redemption"},[e("div",{staticClass:"box"},[e("div",{staticClass:"logos"},[e("div",[e("img",{attrs:{src:t.info.logo0}}),e("img",{attrs:{src:t.info.logo1}})]),e("span",[t._v(t._s(`${t.info.symbol0}/${t.info.symbol1}`))])]),e("div",{staticClass:"info"},[e("div",[e("span",[t._v(t._s(t.info.symbol0))]),e("span",[t._v(t._s(t.info.amount0.toFixed(6)))])]),e("div",[e("span",[t._v(t._s(t.info.symbol1))]),e("span",[t._v(t._s(t.info.amount1.toFixed(6)))])]),e("div",[e("span",[t._v(t._s(t.$t("redemption.text1")))]),e("span",{domProps:{textContent:t._s(t.info.lp.toFixed(6))}})])]),e("div",{staticClass:"setting"},[e("span",[t._v(t._s(t.$t("redemption.text2")))]),e("span",[t._v(t._s(t.value)+"%")]),e("van-slider",{attrs:{"active-color":"#4891DF","inactive-color":"#E4E4E4"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("div",{staticClass:"steps"},[e("span",{on:{click:function(e){t.value=0}}},[t._v("0")]),e("span",{on:{click:function(e){t.value=25}}},[t._v("25%")]),e("span",{on:{click:function(e){t.value=50}}},[t._v("50%")]),e("span",{on:{click:function(e){t.value=75}}},[t._v("75%")]),e("span",{on:{click:function(e){t.value=100}}},[t._v("100%")])])],1),e("div",{staticClass:"rate"},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.rateToggle,expression:"!rateToggle"}]},[t._v(t._s(`${t.$t("redemption.text3")} 1 ${t.info.symbol0}≈${t.rate.toFixed(6)} ${t.info.symbol1}`))]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.rateToggle,expression:"rateToggle"}]},[t._v(t._s(`${t.$t("redemption.text3")} 1 ${t.info.symbol1}≈${t.reRate.toFixed(6)} ${t.info.symbol0}`))]),e("img",{attrs:{src:i("5605")},on:{click:function(e){t.rateToggle=!t.rateToggle}}})]),e("div",{staticClass:"coin"},[e("img",{attrs:{src:t.info.logo0}}),e("span",[t._v(t._s(`${t.amount0.toFixed(6)} ${t.info.symbol0}`))])]),e("div",{staticClass:"coin"},[e("img",{attrs:{src:t.info.logo1}}),e("span",[t._v(t._s(`${t.amount1.toFixed(6)} ${t.info.symbol1}`))])]),e("van-button",{on:{click:t.removeLiquidity}},[t._v(t._s(t.$t("redemption.text4")))])],1),e("redeem-state",{attrs:{amount0:t.amount0,amount1:t.amount1,symbol0:t.info.symbol0,symbol1:t.info.symbol1,lpAmount:t.lpAmount.toFixed(),tradeState:t.tradeState,rate:t.rate,reRate:t.reRate},on:{remove:t.removeLiquidity,close:function(e){return t.$router.back()}}})],1)},a=[],o=(i("66b9"),i("b650")),s=(i("68ef"),i("9617"),i("d282")),r=i("ea8e"),u=i("a142");function c(t){if(!Object(u["c"])(t))return t;if(Array.isArray(t))return t.map((function(t){return c(t)}));if("object"===typeof t){var e={};return Object.keys(t).forEach((function(i){e[i]=c(t[i])})),e}return t}var l=i("1325"),d=i("482d"),h=i("3875"),f=i("78eb"),v=Object(s["a"])("slider"),m=v[0],p=v[1],b=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},g=m({mixins:[h["a"],f["a"]],props:{disabled:Boolean,vertical:Boolean,range:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},value:{type:[Number,Array],default:0}},data:function(){return{dragStatus:""}},computed:{scope:function(){return this.max-this.min},buttonStyle:function(){if(this.buttonSize){var t=Object(r["a"])(this.buttonSize);return{width:t,height:t}}}},created:function(){this.updateValue(this.value)},mounted:function(){this.range?(this.bindTouchEvent(this.$refs.wrapper0),this.bindTouchEvent(this.$refs.wrapper1)):this.bindTouchEvent(this.$refs.wrapper)},methods:{onTouchStart:function(t){this.disabled||(this.touchStart(t),this.currentValue=this.value,this.range?this.startValue=this.value.map(this.format):this.startValue=this.format(this.value),this.dragStatus="start")},onTouchMove:function(t){if(!this.disabled){"start"===this.dragStatus&&this.$emit("drag-start"),Object(l["c"])(t,!0),this.touchMove(t),this.dragStatus="draging";var e=this.$el.getBoundingClientRect(),i=this.vertical?this.deltaY:this.deltaX,n=this.vertical?e.height:e.width,a=i/n*this.scope;this.range?this.currentValue[this.index]=this.startValue[this.index]+a:this.currentValue=this.startValue+a,this.updateValue(this.currentValue)}},onTouchEnd:function(){this.disabled||("draging"===this.dragStatus&&(this.updateValue(this.currentValue,!0),this.$emit("drag-end")),this.dragStatus="")},onClick:function(t){if(t.stopPropagation(),!this.disabled){var e=this.$el.getBoundingClientRect(),i=this.vertical?t.clientY-e.top:t.clientX-e.left,n=this.vertical?e.height:e.width,a=+this.min+i/n*this.scope;if(this.range){var o=this.value,s=o[0],r=o[1],u=(s+r)/2;a<=u?s=a:r=a,a=[s,r]}this.startValue=this.value,this.updateValue(a,!0)}},handleOverlap:function(t){return t[0]>t[1]?(t=c(t),t.reverse()):t},updateValue:function(t,e){t=this.range?this.handleOverlap(t).map(this.format):this.format(t),b(t,this.value)||this.$emit("input",t),e&&!b(t,this.startValue)&&this.$emit("change",t)},format:function(t){var e=+this.min,i=+this.max,n=+this.step;t=Object(d["c"])(t,e,i);var a=Math.round((t-e)/n)*n;return Object(d["a"])(e,a)}},render:function(){var t,e,i=this,n=arguments[0],a=this.vertical,o=a?"height":"width",s=a?"width":"height",u=(t={background:this.inactiveColor},t[s]=Object(r["a"])(this.barHeight),t),c=function(){var t=i.value,e=i.min,n=i.range,a=i.scope;return n?100*(t[1]-t[0])/a+"%":100*(t-e)/a+"%"},l=function(){var t=i.value,e=i.min,n=i.range,a=i.scope;return n?100*(t[0]-e)/a+"%":null},d=(e={},e[o]=c(),e.left=this.vertical?null:l(),e.top=this.vertical?l():null,e.background=this.activeColor,e);this.dragStatus&&(d.transition="none");var h=function(t){var e=["left","right"],a="number"===typeof t,o=a?i.value[t]:i.value,s=function(){return a?"button-wrapper-"+e[t]:"button-wrapper"},r=function(){return a?"wrapper"+t:"wrapper"},u=function(){if(a){var e=i.slots(0===t?"left-button":"right-button",{value:o});if(e)return e}return i.slots("button")?i.slots("button"):n("div",{class:p("button"),style:i.buttonStyle})};return n("div",{ref:r(),attrs:{role:"slider",tabindex:i.disabled?-1:0,"aria-valuemin":i.min,"aria-valuenow":i.value,"aria-valuemax":i.max,"aria-orientation":i.vertical?"vertical":"horizontal"},class:p(s()),on:{touchstart:function(){a&&(i.index=t)},click:function(t){return t.stopPropagation()}}},[u()])};return n("div",{style:u,class:p({disabled:this.disabled,vertical:a}),on:{click:this.onClick}},[n("div",{class:p("bar"),style:d},[this.range?[h(0),h(1)]:h()])])}}),y=(i("caad"),i("b9cc")),x=i("2f62"),S=i("01b1"),$={components:{[g.name]:g,[o["a"].name]:o["a"],"redeem-state":()=>i.e("chunk-46a4c92e").then(i.bind(null,"edba"))},data(){return{info:null,rate:"0",reRate:"0",rateToggle:!1,contract:null,allowance:"0".toBN(),value:25,tradeState:"none"}},computed:{...Object(x["b"])(["deadline","chainId"]),lpAmount(){return this.info.lp.toWei().toBN().div(100).times(this.value)},amount0(){return this.info.amount0.toBN().div(100).times(this.value).toFixed()},amount1(){return this.info.amount1.toBN().div(100).times(this.value).toFixed()}},created(){const{decimals0:t,decimals1:e,reserve0:i,reserve1:n,address:a}=JSON.parse(this.$route.query.info),o="1".toWei(t).toBN().times(n).div(i).toFixed(0).fromWei(e),s="1".toWei(e).toBN().times(i).div(n).toFixed(0).fromWei(t);this.info=JSON.parse(this.$route.query.info),this.rate=Number(o)||"<0.000001",this.reRate=Number(s)||"<0.000001",this.contract=new this.$web3.eth.Contract(y,a),this.init()},methods:{async init(){const{symbol0:t,symbol1:e}=this.info,i=[t,e].includes("BHB"),n=this.$contracts[i?"BHBToken":"Router"].options.address;this.allowance=(await this.contract.methods.allowance(this.$address,n).call({from:this.$address})).toBN()},approve(){const{symbol0:t,symbol1:e}=this.info,i=[t,e].includes("BHB"),n=this.$contracts[i?"BHBToken":"Router"].options.address;this.contract.methods.approve(n,this.lpAmount.times(10).toFixed(0)).send({from:this.$address}).on("transactionHash",t=>{this.tradeState="approve"}).on("receipt",async t=>{await this.init(),this.tradeState="approved"}).on("error",t=>{this.tradeState="none"})},removeLiquidity(){const{address0:t,address1:e,decimals0:i,decimals1:n,symbol0:a,symbol1:o}=this.info,s=S["a"][this.chainId].mainCoin;if(this.allowance.lt(this.lpAmount))return this.approve();if([a,o].includes(s.symbol))return this.removeLiquidityETH();const r=Math.floor((new Date).getTime()/1e3)+Number(this.deadline),u=[a,o].includes("BHB"),c=u?this.$contracts.BHBToken:this.$contracts.Router;c.methods.removeLiquidity(t,e,this.lpAmount.toFixed(0),this.amount0.toWei(i).toBN().times(.99).toFixed(0),this.amount1.toWei(n).toBN().times(.99).toFixed(0),this.$address,r).send({from:this.$address}).on("transactionHash",t=>{this.tradeState="in"}).on("receipt",t=>{this.tradeState="done"}).on("error",t=>{this.tradeState="none"})},removeLiquidityETH(){const t=Math.floor((new Date).getTime()/1e3)+Number(this.deadline),e=S["a"][this.chainId].mainCoin,{symbol0:i,symbol1:n}=this.info,a=Number(i!==e.symbol),o=Number(!a),s=[i,n].includes("BHB"),r=s?this.$contracts.BHBToken:this.$contracts.Router;r.methods.removeLiquidityETH(this.info["address"+o],this.lpAmount.toFixed(0),this["amount"+o].toWei(this.info["decimals"+o]).toBN().times(.99).toFixed(0),this["amount"+a].toWei(this.info["decimals"+a]).toBN().times(.99).toFixed(0),this.$address,t).send({from:this.$address}).on("transactionHash",t=>{this.tradeState="in"}).on("receipt",t=>{this.tradeState="done"}).on("error",t=>{this.tradeState="none"})}}},B=$,w=B,_=(i("32a5"),i("2555"),i("2877")),k=Object(_["a"])(w,n,a,!1,null,"03ce8898",null);e["default"]=k.exports},"482d":function(t,e,i){"use strict";function n(t,e,i){return Math.min(Math.max(t,e),i)}function a(t,e,i){var n=t.indexOf(e),a="";return-1===n?t:"-"===e&&0!==n?t.slice(0,n):("."===e&&t.match(/^(\.|-\.)/)&&(a=n?"-0":"0"),a+t.slice(0,n+1)+t.slice(n).replace(i,""))}function o(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),t=e?a(t,".",/\./g):t.split(".")[0],t=i?a(t,"-",/-/g):t.replace(/-/,"");var n=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(n,"")}function s(t,e){var i=Math.pow(10,10);return Math.round((t+e)*i)/i}i.d(e,"c",(function(){return n})),i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return s}))},"48f4":function(t,e,i){"use strict";function n(t){return"NavigationDuplicated"===t.name||t.message&&-1!==t.message.indexOf("redundant navigation")}function a(t,e){var i=e.to,a=e.url,o=e.replace;if(i&&t){var s=t[o?"replace":"push"](i);s&&s.catch&&s.catch((function(t){if(t&&!n(t))throw t}))}else a&&(o?location.replace(a):location.href=a)}function o(t){a(t.parent&&t.parent.$router,t.props)}i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return s}));var s={url:String,replace:Boolean,to:[String,Object]}},5605:function(t,e,i){t.exports=i.p+"img/icon-exchange.70b56ba8.svg"},"66b9":function(t,e,i){"use strict";i("68ef"),i("9d70"),i("3743"),i("e3b3"),i("bc1b")},"78eb":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},9617:function(t,e,i){},b1d2:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a}));var n="van-hairline",a=n+"--surround"},b650:function(t,e,i){"use strict";var n=i("c31d"),a=i("2638"),o=i.n(a),s=i("d282"),r=i("ba31"),u=i("b1d2"),c=i("48f4"),l=i("ad06"),d=i("543e"),h=Object(s["a"])("button"),f=h[0],v=h[1];function m(t,e,i,n){var a,s=e.tag,h=e.icon,f=e.type,m=e.color,p=e.plain,b=e.disabled,g=e.loading,y=e.hairline,x=e.loadingText,S=e.iconPosition,$={};function B(t){e.loading&&t.preventDefault(),g||b||(Object(r["a"])(n,"click",t),Object(c["a"])(n))}function w(t){Object(r["a"])(n,"touchstart",t)}m&&($.color=p?m:"white",p||($.background=m),-1!==m.indexOf("gradient")?$.border=0:$.borderColor=m);var _=[v([f,e.size,{plain:p,loading:g,disabled:b,hairline:y,block:e.block,round:e.round,square:e.square}]),(a={},a[u["b"]]=y,a)];function k(){return g?i.loading?i.loading():t(d["a"],{class:v("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}}):i.icon?t("div",{class:v("icon")},[i.icon()]):h?t(l["a"],{attrs:{name:h,classPrefix:e.iconPrefix},class:v("icon")}):void 0}function N(){var n,a=[];return"left"===S&&a.push(k()),n=g?x:i.default?i.default():e.text,n&&a.push(t("span",{class:v("text")},[n])),"right"===S&&a.push(k()),a}return t(s,o()([{style:$,class:_,attrs:{type:e.nativeType,disabled:b},on:{click:B,touchstart:w}},Object(r["b"])(n)]),[t("div",{class:v("content")},[N()])])}m.props=Object(n["a"])({},c["b"],{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"},iconPosition:{type:String,default:"left"}}),e["a"]=f(m)},bc1b:function(t,e,i){},c8c5:function(t,e,i){},dfd6:function(t,e,i){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12484184"],{1146:function(t,e,i){},"1a04":function(t,e,i){},"30f0":function(t,e,i){"use strict";i("fef0")},"482d":function(t,e,i){"use strict";function s(t,e,i){return Math.min(Math.max(t,e),i)}function n(t,e,i){var s=t.indexOf(e),n="";return-1===s?t:"-"===e&&0!==s?t.slice(0,s):("."===e&&t.match(/^(\.|-\.)/)&&(n=s?"-0":"0"),n+t.slice(0,s+1)+t.slice(s).replace(i,""))}function a(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),t=e?n(t,".",/\./g):t.split(".")[0],t=i?n(t,"-",/-/g):t.replace(/-/,"");var s=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(s,"")}function r(t,e){var i=Math.pow(10,10);return Math.round((t+e)*i)/i}i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return r}))},"6cbb":function(t,e,i){"use strict";i("c1a0")},ac1e:function(t,e,i){"use strict";i("68ef"),i("e3b3")},bab4:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{staticClass:"search-token"},[e("van-search",{attrs:{"show-action":"",placeholder:t.$t("searchTokens.text1"),"action-text":t.$t("searchTokens.text2"),background:"#fff"},on:{input:t.onInput,cancel:t.close},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("span",{staticClass:"title"},[t._v(t._s(t.$t("searchTokens.text3")))]),e("div",{staticClass:"referral-tokens"},[e("div",t._l(t.hotList,(function(i){return e("div",{key:i.address,on:{click:function(e){return t.select(i)}}},[e("img",{attrs:{src:i.logoURI}}),e("span",{domProps:{textContent:t._s(i.symbol)}})])})),0)]),e("span",{staticClass:"title"},[t._v(t._s(t.$t("searchTokens.text4")))]),e("div",{staticClass:"all-tokens"},[e("van-list",{directives:[{name:"show",rawName:"v-show",value:!t.empty&&!t.searching,expression:"!empty && !searching"}],attrs:{finished:t.finished,"finished-text":t.$t("searchTokens.text5")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.allTokens,(function(i){return e("div",{key:i.address,on:{click:function(e){return t.select(i)}}},[e("div",[e("img",{attrs:{src:i.logoURI}}),e("div",[e("span",{domProps:{textContent:t._s(i.symbol)}}),e("span",{domProps:{textContent:t._s(i.name)}})])]),e("div",[void 0!==i.balance?e("span",[t._v(t._s(i.balance))]):e("span"),e("span",{domProps:{textContent:t._s(`${i.address.slice(0,5)}...${i.address.slice(-5)}`)}})])])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.empty&&!t.searching,expression:"empty && !searching"}],staticClass:"empty"},[e("img",{attrs:{src:i("42a0")}}),e("span",[t._v(t._s(t.$t("searchTokens.text6")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],staticClass:"loading"},[e("van-loading",{attrs:{type:"spinner",color:"#3C94FF","text-color":"#404D66",vertical:""}},[t._v(t._s(t.$t("searchTokens.text7")))])],1)],1)],1)])},n=[],a=(i("ac1e"),i("543e")),r=(i("68ef"),i("9d70"),i("3743"),i("1a04"),i("1146"),i("f032"),i("2638")),o=i.n(r),l=i("c31d"),c=i("d282"),h=i("ba31"),u=i("1325"),d=i("a142");function f(){return!d["g"]&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())}var g=i("a8c1"),v=f();function m(){v&&Object(g["c"])(Object(g["a"])())}var p=i("482d"),b=i("ea8e"),y=i("ad06"),k=i("48f4"),x={icon:String,size:String,center:Boolean,isLink:Boolean,required:Boolean,iconPrefix:String,titleStyle:null,titleClass:null,valueClass:null,labelClass:null,title:[Number,String],value:[Number,String],label:[Number,String],arrowDirection:String,border:{type:Boolean,default:!0},clickable:{type:Boolean,default:null}},w=Object(c["a"])("cell"),$=w[0],C=w[1];function T(t,e,i,s){var n,a=e.icon,r=e.size,l=e.title,c=e.label,u=e.value,f=e.isLink,g=i.title||Object(d["c"])(l);function v(){var s=i.label||Object(d["c"])(c);if(s)return t("div",{class:[C("label"),e.labelClass]},[i.label?i.label():c])}function m(){if(g)return t("div",{class:[C("title"),e.titleClass],style:e.titleStyle},[i.title?i.title():t("span",[l]),v()])}function p(){var s=i.default||Object(d["c"])(u);if(s)return t("div",{class:[C("value",{alone:!g}),e.valueClass]},[i.default?i.default():t("span",[u])])}function b(){return i.icon?i.icon():a?t(y["a"],{class:C("left-icon"),attrs:{name:a,classPrefix:e.iconPrefix}}):void 0}function x(){var s=i["right-icon"];if(s)return s();if(f){var n=e.arrowDirection;return t(y["a"],{class:C("right-icon"),attrs:{name:n?"arrow-"+n:"arrow"}})}}function w(t){Object(h["a"])(s,"click",t),Object(k["a"])(s)}var $=null!=(n=e.clickable)?n:f,T={clickable:$,center:e.center,required:e.required,borderless:!e.border};return r&&(T[r]=r),t("div",o()([{class:C(T),attrs:{role:$?"button":null,tabindex:$?0:null},on:{click:w}},Object(h["b"])(s)]),[b(),m(),p(),x(),null==i.extra?void 0:i.extra()])}T.props=Object(l["a"])({},x,k["b"]);var S=$(T),j=Object(c["a"])("field"),O=j[0],F=j[1],B=O({inheritAttrs:!1,provide:function(){return{vanField:this}},inject:{vanForm:{default:null}},props:Object(l["a"])({},x,{name:String,rules:Array,disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},autosize:[Boolean,Object],leftIcon:String,rightIcon:String,clearable:Boolean,formatter:Function,maxlength:[Number,String],labelWidth:[Number,String],labelClass:null,labelAlign:String,inputAlign:String,placeholder:String,errorMessage:String,errorMessageAlign:String,showWordLimit:Boolean,value:{type:[Number,String],default:""},type:{type:String,default:"text"},error:{type:Boolean,default:null},colon:{type:Boolean,default:null},clearTrigger:{type:String,default:"focus"},formatTrigger:{type:String,default:"onChange"}}),data:function(){return{focused:!1,validateFailed:!1,validateMessage:""}},watch:{value:function(){this.updateValue(this.value),this.resetValidation(),this.validateWithTrigger("onChange"),this.$nextTick(this.adjustSize)}},mounted:function(){this.updateValue(this.value,this.formatTrigger),this.$nextTick(this.adjustSize),this.vanForm&&this.vanForm.addField(this)},beforeDestroy:function(){this.vanForm&&this.vanForm.removeField(this)},computed:{showClear:function(){var t=this.getProp("readonly");if(this.clearable&&!t){var e=Object(d["c"])(this.value)&&""!==this.value,i="always"===this.clearTrigger||"focus"===this.clearTrigger&&this.focused;return e&&i}},showError:function(){return null!==this.error?this.error:!!(this.vanForm&&this.vanForm.showError&&this.validateFailed)||void 0},listeners:function(){return Object(l["a"])({},this.$listeners,{blur:this.onBlur,focus:this.onFocus,input:this.onInput,click:this.onClickInput,keypress:this.onKeypress})},labelStyle:function(){var t=this.getProp("labelWidth");if(t)return{width:Object(b["a"])(t)}},formValue:function(){return this.children&&(this.$scopedSlots.input||this.$slots.input)?this.children.value:this.value}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},runValidator:function(t,e){return new Promise((function(i){var s=e.validator(t,e);if(Object(d["f"])(s))return s.then(i);i(s)}))},isEmptyValue:function(t){return Array.isArray(t)?!t.length:0!==t&&!t},runSyncRule:function(t,e){return(!e.required||!this.isEmptyValue(t))&&!(e.pattern&&!e.pattern.test(t))},getRuleMessage:function(t,e){var i=e.message;return Object(d["d"])(i)?i(t,e):i},runRules:function(t){var e=this;return t.reduce((function(t,i){return t.then((function(){if(!e.validateFailed){var t=e.formValue;return i.formatter&&(t=i.formatter(t,i)),e.runSyncRule(t,i)?i.validator?e.runValidator(t,i).then((function(s){!1===s&&(e.validateFailed=!0,e.validateMessage=e.getRuleMessage(t,i))})):void 0:(e.validateFailed=!0,void(e.validateMessage=e.getRuleMessage(t,i)))}}))}),Promise.resolve())},validate:function(t){var e=this;return void 0===t&&(t=this.rules),new Promise((function(i){t||i(),e.resetValidation(),e.runRules(t).then((function(){e.validateFailed?i({name:e.name,message:e.validateMessage}):i()}))}))},validateWithTrigger:function(t){if(this.vanForm&&this.rules){var e=this.vanForm.validateTrigger===t,i=this.rules.filter((function(i){return i.trigger?i.trigger===t:e}));i.length&&this.validate(i)}},resetValidation:function(){this.validateFailed&&(this.validateFailed=!1,this.validateMessage="")},updateValue:function(t,e){void 0===e&&(e="onChange"),t=Object(d["c"])(t)?String(t):"";var i=this.maxlength;if(Object(d["c"])(i)&&t.length>i&&(t=this.value&&this.value.length===+i?this.value:t.slice(0,i)),"number"===this.type||"digit"===this.type){var s="number"===this.type;t=Object(p["b"])(t,s,s)}this.formatter&&e===this.formatTrigger&&(t=this.formatter(t));var n=this.$refs.input;n&&t!==n.value&&(n.value=t),t!==this.value&&this.$emit("input",t)},onInput:function(t){t.target.composing||this.updateValue(t.target.value)},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.$nextTick(this.adjustSize),this.getProp("readonly")&&this.blur()},onBlur:function(t){this.getProp("readonly")||(this.focused=!1,this.updateValue(this.value,"onBlur"),this.$emit("blur",t),this.validateWithTrigger("onBlur"),this.$nextTick(this.adjustSize),m())},onClick:function(t){this.$emit("click",t)},onClickInput:function(t){this.$emit("click-input",t)},onClickLeftIcon:function(t){this.$emit("click-left-icon",t)},onClickRightIcon:function(t){this.$emit("click-right-icon",t)},onClear:function(t){Object(u["c"])(t),this.$emit("input",""),this.$emit("clear",t)},onKeypress:function(t){var e=13;if(t.keyCode===e){var i=this.getProp("submitOnEnter");i||"textarea"===this.type||Object(u["c"])(t),"search"===this.type&&this.blur()}this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){var e=Object(g["a"])();t.style.height="auto";var i=t.scrollHeight;if(Object(d["e"])(this.autosize)){var s=this.autosize,n=s.maxHeight,a=s.minHeight;n&&(i=Math.min(i,n)),a&&(i=Math.max(i,a))}i&&(t.style.height=i+"px",Object(g["c"])(e))}},genInput:function(){var t=this.$createElement,e=this.type,i=this.getProp("disabled"),s=this.getProp("readonly"),n=this.slots("input"),a=this.getProp("inputAlign");if(n)return t("div",{class:F("control",[a,"custom"]),on:{click:this.onClickInput}},[n]);var r={ref:"input",class:F("control",a),domProps:{value:this.value},attrs:Object(l["a"])({},this.$attrs,{name:this.name,disabled:i,readonly:s,placeholder:this.placeholder}),on:this.listeners,directives:[{name:"model",value:this.value}]};if("textarea"===e)return t("textarea",o()([{},r]));var c,h=e;return"number"===e&&(h="text",c="decimal"),"digit"===e&&(h="tel",c="numeric"),t("input",o()([{attrs:{type:h,inputmode:c}},r]))},genLeftIcon:function(){var t=this.$createElement,e=this.slots("left-icon")||this.leftIcon;if(e)return t("div",{class:F("left-icon"),on:{click:this.onClickLeftIcon}},[this.slots("left-icon")||t(y["a"],{attrs:{name:this.leftIcon,classPrefix:this.iconPrefix}})])},genRightIcon:function(){var t=this.$createElement,e=this.slots,i=e("right-icon")||this.rightIcon;if(i)return t("div",{class:F("right-icon"),on:{click:this.onClickRightIcon}},[e("right-icon")||t(y["a"],{attrs:{name:this.rightIcon,classPrefix:this.iconPrefix}})])},genWordLimit:function(){var t=this.$createElement;if(this.showWordLimit&&this.maxlength){var e=(this.value||"").length;return t("div",{class:F("word-limit")},[t("span",{class:F("word-num")},[e]),"/",this.maxlength])}},genMessage:function(){var t=this.$createElement;if(!this.vanForm||!1!==this.vanForm.showErrorMessage){var e=this.errorMessage||this.validateMessage;if(e){var i=this.getProp("errorMessageAlign");return t("div",{class:F("error-message",i)},[e])}}},getProp:function(t){return Object(d["c"])(this[t])?this[t]:this.vanForm&&Object(d["c"])(this.vanForm[t])?this.vanForm[t]:void 0},genLabel:function(){var t=this.$createElement,e=this.getProp("colon")?":":"";return this.slots("label")?[this.slots("label"),e]:this.label?t("span",[this.label+e]):void 0}},render:function(){var t,e=arguments[0],i=this.slots,s=this.getProp("disabled"),n=this.getProp("labelAlign"),a={icon:this.genLeftIcon},r=this.genLabel();r&&(a.title=function(){return r});var o=this.slots("extra");return o&&(a.extra=function(){return o}),e(S,{attrs:{icon:this.leftIcon,size:this.size,center:this.center,border:this.border,isLink:this.isLink,required:this.required,clickable:this.clickable,titleStyle:this.labelStyle,valueClass:F("value"),titleClass:[F("label",n),this.labelClass],arrowDirection:this.arrowDirection},scopedSlots:a,class:F((t={error:this.showError,disabled:s},t["label-"+n]=n,t["min-height"]="textarea"===this.type&&!this.autosize,t)),on:{click:this.onClick}},[e("div",{class:F("body")},[this.genInput(),this.showClear&&e(y["a"],{attrs:{name:"clear"},class:F("clear"),on:{touchstart:this.onClear}}),this.genRightIcon(),i("button")&&e("div",{class:F("button")},[i("button")])]),this.genWordLimit(),this.genMessage()])}}),I=Object(c["a"])("search"),P=I[0],L=I[1],M=I[2];function q(t,e,i,s){function n(){if(i.label||e.label)return t("div",{class:L("label")},[i.label?i.label():e.label])}function a(){if(e.showAction)return t("div",{class:L("action"),attrs:{role:"button",tabindex:"0"},on:{click:n}},[i.action?i.action():e.actionText||M("cancel")]);function n(){i.action||(Object(h["a"])(s,"input",""),Object(h["a"])(s,"cancel"))}}var r={attrs:s.data.attrs,on:Object(l["a"])({},s.listeners,{keypress:function(t){13===t.keyCode&&(Object(u["c"])(t),Object(h["a"])(s,"search",e.value)),Object(h["a"])(s,"keypress",t)}})},c=Object(h["b"])(s);return c.attrs=void 0,t("div",o()([{class:L({"show-action":e.showAction}),style:{background:e.background}},c]),[null==i.left?void 0:i.left(),t("div",{class:L("content",e.shape)},[n(),t(B,o()([{attrs:{type:"search",border:!1,value:e.value,leftIcon:e.leftIcon,rightIcon:e.rightIcon,clearable:e.clearable,clearTrigger:e.clearTrigger},scopedSlots:{"left-icon":i["left-icon"],"right-icon":i["right-icon"]}},r]))]),a()])}q.props={value:String,label:String,rightIcon:String,actionText:String,background:String,showAction:Boolean,clearTrigger:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}};var E=P(q),_=(i("8a58"),i("e41f"));i("e3b3"),i("c0c2");function R(t){var e=window.getComputedStyle(t),i="none"===e.display,s=null===t.offsetParent&&"fixed"!==e.position;return i||s}var A=i("5fbe"),W=Object(c["a"])("list"),z=W[0],V=W[1],N=W[2],D=z({mixins:[Object(A["a"])((function(t){this.scroller||(this.scroller=Object(g["b"])(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.innerLoading||t.finished||t.error)){var e,i=t.$el,s=t.scroller,n=t.offset,a=t.direction;e=s.getBoundingClientRect?s.getBoundingClientRect():{top:0,bottom:s.innerHeight};var r=e.bottom-e.top;if(!r||R(i))return!1;var o=!1,l=t.$refs.placeholder.getBoundingClientRect();o="up"===a?e.top-l.top<=n:l.bottom-e.bottom<=n,o&&(t.innerLoading=!0,t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading&&!this.finished)return t("div",{key:"loading",class:V("loading")},[this.slots("loading")||t(a["a"],{attrs:{size:"16"}},[this.loadingText||N("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished){var e=this.slots("finished")||this.finishedText;if(e)return t("div",{class:V("finished-text")},[e])}},genErrorText:function(){var t=this.$createElement;if(this.error){var e=this.slots("error")||this.errorText;if(e)return t("div",{on:{click:this.clickErrorText},class:V("error-text")},[e])}}},render:function(){var t=arguments[0],e=t("div",{ref:"placeholder",key:"placeholder",class:V("placeholder")});return t("div",{class:V(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():e,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():e])}}),H=(i("caad"),i("b9cc")),U=i("2f62");let J={};const K="https://chainconfig.github.io/bsc/bhbtokens.json",G="https://chainconfig.github.io/polygon/bhb_polygon_tokens.json";var Q={components:{[D.name]:D,[_["a"].name]:_["a"],[E.name]:E,[a["a"].name]:a["a"]},data(){return{value:"",show:!1,hotList:[],allTokens:[],cacheTokens:[],loading:!1,finished:!1,empty:!1,searching:!1,who:"",start:0,end:10}},computed:{...Object(U["b"])(["chainId"])},created(){const t=137===this.chainId?G:K;fetch(t).then(t=>t.json()).then(t=>{this.hotList=t.hot,J=t})},methods:{onInput(){if(""===this.value)return this.empty=!1,this.start=10,this.end=20,this.searching=!1,this.allTokens=this.cacheTokens,!1;if(this.searching)return!1;this.searching=!0;const t=setTimeout(async()=>{if(this.value.length>0){const t=this.$web3.utils.isAddress(this.value),e=await(t?this.getTokenByAddress():this.getTokenBySymbol());this.empty=0===e.length,this.allTokens=e,this.searching=!1}clearTimeout(t)},500)},getTokenBySymbol(){return new Promise(t=>{const e=J.all.filter(t=>t.symbol.includes(this.value.toUpperCase()));if(e.length>0){const i=new this.$web3.BatchRequest;for(let t=0;t<e.length;t++){const s=new this.$web3.eth.Contract(H,e[t].address);i.add(s.methods.balanceOf(this.$address).call.request({from:this.$address}))}i.requestManager.sendBatch(i.requests,(i,s)=>{i||(s.forEach((t,i)=>{e[i].balance=0===i?("string"===typeof t?t:t.result).fromWei(e[i].decimals).toFixed(4):t.result.fromWei(e[i].decimals).toFixed(4)}),t(e))})}else t([])})},getTokenByAddress(){return new Promise(t=>{const e=J.all.filter(t=>t.address.toLowerCase()===this.value.toLowerCase()),i=new this.$web3.BatchRequest;if(e.length>0){for(let t=0;t<e.length;t++){const s=new this.$web3.eth.Contract(H,e[t].address);i.add(s.methods.balanceOf(this.$address).call.request({from:this.$address}))}i.requestManager.sendBatch(i.requests,(i,s)=>{i?t([]):(s.forEach((t,i)=>{e[i].balance=0===i?("string"===typeof t?t:t.result).fromWei(e[i].decimals).toFixed(4):t.result.fromWei(e[i].decimals).toFixed(4)}),t(e))})}else{const e=new this.$web3.eth.Contract(H,this.value);i.add(e.methods.name().call.request({from:this.$address})),i.add(e.methods.symbol().call.request({from:this.$address})),i.add(e.methods.decimals().call.request({from:this.$address})),i.add(e.methods.balanceOf(this.$address).call.request({from:this.$address})),i.requestManager.sendBatch(i.requests,(e,i)=>{if(e)t([]);else{const e=("string"===typeof i[0]?i[0]:i[0].result).decode(["string"]),s=i[1].result.decode(["string"]),n=i[2].result.decode(["uint8"]),a=i[3].result.decode(["uint256"]).fromWei(n).toFixed(4);t([{name:e,symbol:s,decimals:n,balance:a,address:this.value,chainId:56,logoURI:"https://chainconfig.github.io/bsc/tokens/unknown.svg"}])}})}})},open(t){this.show=!0,this.who=t},close(){this.show=!1},select(t){this.$emit("select",t,this.who),this.show=!1},async onLoad(){if(this.end>=J.all.length&&this.start>=J.all.length)return this.loading=!1,this.finished=!0,!1;const t=J.all.slice(this.start,this.end),e=new this.$web3.BatchRequest;for(let i=0;i<t.length;i++){const s=new this.$web3.eth.Contract(H,t[i].address);e.add(s.methods.balanceOf(this.$address).call.request({from:this.$address}))}e.requestManager.sendBatch(e.requests,(e,i)=>{e||(i.forEach((e,i)=>{t[i].balance=0===i?("string"===typeof e?e:e.result).fromWei(t[i].decimals).toFixed(4):e.result.fromWei(t[i].decimals).toFixed(4)}),0===this.start&&10===this.end&&(this.cacheTokens=t),this.allTokens=this.allTokens.concat(t),this.loading=!1,this.start=this.end,this.end+=10)})}}},X=Q,Y=X,Z=(i("30f0"),i("6cbb"),i("2877")),tt=Object(Z["a"])(Y,s,n,!1,null,"eaf3cf94",null);e["default"]=tt.exports},c0c2:function(t,e,i){},c1a0:function(t,e,i){},f032:function(t,e,i){},fef0:function(t,e,i){}}]);
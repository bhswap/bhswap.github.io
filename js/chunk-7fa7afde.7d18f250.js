(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fa7afde"],{"2db2":function(t,e,s){t.exports=s.p+"img/bbglogo.0d5e05e2.svg"},4995:function(t,e,s){t.exports=s.p+"img/downarrow.3dc9d2e1.svg"},"507c":function(t,e,s){t.exports=s.p+"img/QRcodelogo.fdf1ae12.svg"},5451:function(t,e,s){"use strict";s("ef6e")},"870d":function(t,e,s){t.exports=s.p+"img/usdtlogo.bb5274f9.svg"},b336:function(t,e,s){var n={"./QRcodelogo.svg":"507c","./bbglogo.svg":"2db2","./logo.svg":"9b19","./usdtlogo.svg":"870d"};function i(t){var e=o(t);return s(e)}function o(t){if(!s.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id="b336"},bc38:function(t,e,s){t.exports=s.p+"img/wallet.30bdd8fa.svg"},e981:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"destroy-mining"},[e("span",[t._v(t._s(t.$t("destroyMining.text1")))]),e("div",{staticClass:"container"},[e("div",{staticClass:"destroy-amount"},[e("div",{staticClass:"title"},[e("img",{attrs:{src:s("bc38")}}),e("span",[t._v(t._s(t.balance.toFixed(4)))]),e("span",[t._v(t._s(t.TokenName))])]),e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:t.$t("destroyMining.text2")},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},t.input]}}),e("div",{staticClass:"SelectToken",on:{click:function(e){t.showSelectToken=!t.showSelectToken}}},[e("img",{staticClass:"logo",attrs:{src:t.logo}}),e("span",[t._v(t._s(t.TokenName))]),e("img",{attrs:{src:s("4995")}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelectToken,expression:"showSelectToken"}],staticClass:"options"},[e("span",{on:{click:function(e){return t.SelectToken("USDT")}}},[t._v("USDT")]),e("i"),e("span",{on:{click:function(e){return t.SelectToken("BHB")}}},[t._v("BHB")])])])]),e("span",[t._v(t._s(t.$t("destroyMining.text3"))),e("span",[t._v(t._s(t.power))])]),e("div",{staticClass:"toAddress"},[e("div",{staticClass:"select-account"},[e("span",[t._v(t._s(t.$t("destroyMining.text15")))]),e("span",{on:{click:function(e){t.showSelect=!t.showSelect}}},[t._v(t._s(t.receiver)),e("van-icon",{attrs:{name:"arrow-down"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelect,expression:"showSelect"}],staticClass:"options"},[e("span",{on:{click:function(e){return t.selectReceiver("他人")}}},[t._v(t._s(t.$t("destroyMining.text4")))]),e("i"),e("span",{on:{click:function(e){return t.selectReceiver("自己")}}},[t._v(t._s(t.$t("destroyMining.text5")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelect,expression:"showSelect"}],staticClass:"overlay",on:{click:function(e){t.showSelect=!1}}})]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.toAddress,expression:"toAddress"}],attrs:{type:"text",readonly:t.isReadyonly,placeholder:"他人"===t.receiver?t.$t("destroyMining.text17"):""},domProps:{value:t.toAddress},on:{input:function(e){e.target.composing||(t.toAddress=e.target.value)}}})]),e("van-button",{directives:[{name:"show",rawName:"v-show",value:"none"===t.tradeState,expression:"tradeState === 'none'"}],staticClass:"double-button",on:{click:t.burnBHTCastingForce}},[t._v(t._s(t.btnText))]),e("van-button",{directives:[{name:"show",rawName:"v-show",value:"none"!==t.tradeState,expression:"tradeState !== 'none'"}],staticClass:"double-button",attrs:{loading:"","loading-text":t.btnText}})],1)])},i=[],o=(s("e7e5"),s("d399")),a=(s("c3a6"),s("ad06")),r=(s("66b9"),s("b650")),c={components:{[r["a"].name]:r["a"],[a["a"].name]:a["a"]},data(){return{amount:"",toAddress:"",receiver:this.$t("destroyMining.text5"),TokenName:"BHB",logo:s("2db2"),showSelect:!1,showSelectToken:!1,isReadyonly:!0,balance:0,power:0,inputing:!1,tradeState:"none",allowance:"0".toBN(),allowanceusdt:"0".toBN()}},computed:{btnText(){if("approving"===this.tradeState)return this.$t("destroyMining.text6");if("trading"===this.tradeState)return this.$t("destroyMining.text7");if("BHB"==this.TokenName){if(this.allowance.lt(this.amount))return this.$t("destroyMining.text8")}else if("USDT"==this.TokenName&&this.allowanceusdt.lt(this.amount))return this.$t("destroyMining.text8");return this.$t("destroyMining.text9")},tokenAddress(){return"BHB"===this.TokenName?this.$contracts.BHBToken._address:this.$contracts.USDTToken._address}},created(){this.$contracts&&(this.init(),this.toAddress=this.$address)},methods:{allIn(){this.amount=this.balance,this.input()},SelectToken(t){this.showSelectToken=!1,this.TokenName=t,this.logo=s("b336")(`./${"BHB"===this.TokenName?"bbg":"usdt"}logo.svg`),this.init(),this.amount.length>0&&this.input()},selectReceiver(t){this.receiver="自己"===t?this.$t("destroyMining.text5"):this.$t("destroyMining.text4"),this.showSelect=!1,this.isReadyonly="自己"===t,this.toAddress="自己"===t?this.$address:""},input(){if(this.inputing)return!1;if(this.amount<=0)return this.power=0,this.inputing=!1,!1;this.inputing=!0;const t=setTimeout(()=>{if(this.amount<=0)return this.power=0,this.inputing=!1,clearTimeout(t),!1;this.$contracts.Govern.methods.getBurnForce(this.tokenAddress,this.amount.toWei()).call({from:this.$address},(e,s)=>{if(!e){if(this.amount<=0)return this.power=0,this.inputing=!1,clearTimeout(t),!1;this.power=s.fromWei().toFixed(0),this.inputing=!1,clearTimeout(t)}})},1e3)},approve(){const t=this.$contracts["BHB"===this.TokenName?"BHBToken":"USDTToken"];t.methods.approve(this.$contracts.Govern._address,this.amount.toBN().times(10).toFixed().toWei()).send({from:this.$address}).on("transactionHash",t=>{this.tradeState="approving"}).on("receipt",async t=>{this.init(),o["a"].success(this.$t("destroyMining.text10")),this.tradeState="none"}).on("error",t=>{this.tradeState="none"})},burnBHTCastingForce(){if(this.amount<=0)return o["a"].fail(this.$t("destroyMining.text11"));if(this.balance.toBN().lt(this.amount))return o["a"].fail(this.$t("destroyMining.text12"));if(!this.$web3.utils.isAddress(this.toAddress))return o["a"].fail(this.$t("destroyMining.text13"));if("BHB"==this.TokenName){if(this.allowance.lt(this.amount))return this.approve()}else if(this.allowanceusdt.lt(this.amount))return this.approve();const t=this.$contracts.Govern.methods.burnToken(this.tokenAddress,this.amount.toWei(),this.toAddress);t.call({from:this.$address},(e,s)=>{e?console.log(e):t.send({from:this.$address}).on("transactionHash",t=>{this.tradeState="trading"}).on("receipt",t=>{this.init(),this.$emit("reload"),o["a"].success(this.$t("destroyMining.text14")),this.amount="",this.power=0,this.tradeState="none"}).on("error",t=>{this.tradeState="none"})})},init(){"BHB"==this.TokenName?this.$contracts.BHBToken.methods.balanceOf(this.$address).call({from:this.$address},(t,e)=>{t||(this.balance=e.fromWei())}):this.$contracts.USDTToken.methods.balanceOf(this.$address).call({from:this.$address},(t,e)=>{t||(this.balance=e.fromWei())}),this.$contracts.BHBToken.methods.allowance(this.$address,this.$contracts.Govern._address).call({from:this.$address},(t,e)=>{t||(this.allowance=e.fromWei().toBN())}),this.$contracts.USDTToken.methods.allowance(this.$address,this.$contracts.Govern._address).call({from:this.$address},(t,e)=>{t||(this.allowanceusdt=e.fromWei().toBN())})}}},d=c,l=d,h=(s("5451"),s("2877")),u=Object(h["a"])(l,n,i,!1,null,"61b13311",null);e["default"]=u.exports},ef6e:function(t,e,s){}}]);
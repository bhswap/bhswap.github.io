(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b639f80"],{"1c63":function(t,e,n){},"2db2":function(t,e,n){t.exports=n.p+"img/bbglogo.0d5e05e2.svg"},"4a6a":function(t,e,n){"use strict";n("1c63")},"507c":function(t,e,n){t.exports=n.p+"img/QRcodelogo.fdf1ae12.svg"},"870d":function(t,e,n){t.exports=n.p+"img/usdtlogo.bb5274f9.svg"},b336:function(t,e,n){var s={"./QRcodelogo.svg":"507c","./bbglogo.svg":"2db2","./logo.svg":"9b19","./usdtlogo.svg":"870d"};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}o.keys=function(){return Object.keys(s)},o.resolve=i,t.exports=o,o.id="b336"},bc38:function(t,e,n){t.exports=n.p+"img/wallet.30bdd8fa.svg"},e981:function(t,e,n){"use strict";n.r(e);var s,o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"destroy-mining"},[s("span",[t._v(t._s(t.$t("destroyMining.text1")))]),s("div",{staticClass:"container"},[s("div",{staticClass:"destroy-amount"},[s("div",{staticClass:"title"},[s("img",{attrs:{src:n("bc38")}}),s("span",[t._v(t._s(t.balance.toFixed(4)))]),s("span",[t._v(t._s(t.TokenName))])]),s("div",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:t.$t("destroyMining.text2")},domProps:{value:t.amount},on:{input:[function(e){e.target.composing||(t.amount=e.target.value)},t.input]}}),s("div",{staticClass:"SelectToken"},[s("img",{staticClass:"logo",attrs:{src:t.logo}}),s("span",[t._v(t._s(t.TokenName))])])])]),s("span",[t._v(t._s(t.$t("destroyMining.text3"))),s("span",[t._v(t._s(t.power))])]),s("div",{staticClass:"toAddress"},[s("div",{staticClass:"select-account"},[s("span",[t._v(t._s(t.$t("destroyMining.text15")))]),s("span",{on:{click:function(e){t.showSelect=!t.showSelect}}},[t._v(t._s(t.receiver)),s("van-icon",{attrs:{name:"arrow-down"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelect,expression:"showSelect"}],staticClass:"options"},[s("span",{on:{click:function(e){return t.selectReceiver("他人")}}},[t._v(t._s(t.$t("destroyMining.text4")))]),s("i"),s("span",{on:{click:function(e){return t.selectReceiver("自己")}}},[t._v(t._s(t.$t("destroyMining.text5")))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelect,expression:"showSelect"}],staticClass:"overlay",on:{click:function(e){t.showSelect=!1}}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.toAddress,expression:"toAddress"}],attrs:{type:"text",readonly:t.isReadyonly,placeholder:"他人"===t.receiver?t.$t("destroyMining.text17"):""},domProps:{value:t.toAddress},on:{input:function(e){e.target.composing||(t.toAddress=e.target.value)}}})]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:"none"===t.tradeState,expression:"tradeState === 'none'"}],staticClass:"double-button",on:{click:t.burnBHTCastingForce}},[t._v(t._s(t.btnText))]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:"none"!==t.tradeState,expression:"tradeState !== 'none'"}],staticClass:"double-button",attrs:{loading:"","loading-text":t.btnText}})],1)])},i=[],a=(n("b0c0"),n("b680"),n("e7e5"),n("d399")),r=(n("96cf"),n("1da1")),c=n("ade3"),d=(n("c3a6"),n("ad06")),l=(n("66b9"),n("b650")),u={components:(s={},Object(c["a"])(s,l["a"].name,l["a"]),Object(c["a"])(s,d["a"].name,d["a"]),s),data:function(){return{amount:"",toAddress:"",receiver:this.$t("destroyMining.text5"),TokenName:"BHB",logo:n("2db2"),showSelect:!1,showSelectToken:!1,isReadyonly:!0,balance:0,power:0,inputing:!1,tradeState:"none",allowance:"0".toBN(),allowanceusdt:"0".toBN()}},computed:{btnText:function(){if("approving"===this.tradeState)return this.$t("destroyMining.text6");if("trading"===this.tradeState)return this.$t("destroyMining.text7");if("BHB"==this.TokenName){if(this.allowance.lt(this.amount))return this.$t("destroyMining.text8")}else if("USDT"==this.TokenName&&this.allowanceusdt.lt(this.amount))return this.$t("destroyMining.text8");return this.$t("destroyMining.text9")},tokenAddress:function(){return"BHB"===this.TokenName?this.$contracts.BHBToken._address:this.$contracts.USDTToken._address}},created:function(){this.$contracts&&this.init()},methods:{allIn:function(){this.amount=this.balance,this.input()},SelectToken:function(t){this.showSelectToken=!1,this.TokenName=t,this.logo=n("b336")("./".concat("BHB"===this.TokenName?"bbg":"usdt","logo.svg")),this.init()},selectReceiver:function(t){this.receiver="自己"===t?this.$t("destroyMining.text5"):this.$t("destroyMining.text4"),this.showSelect=!1,this.isReadyonly="自己"===t,this.toAddress="自己"===t?this.$address:""},input:function(){var t=this;if(this.inputing)return!1;this.inputing=!0;var e=setTimeout((function(){if(t.amount<=0)return t.power=0,t.inputing=!1,clearTimeout(e),!1;t.$contracts.Govern.methods.getBurnForce(t.tokenAddress,t.amount.toWei()).call({from:t.$address},(function(n,s){n||(console.log(s.fromWei()),t.power=s.fromWei().toFixed(0),t.inputing=!1,clearTimeout(e))}))}),1e3)},approve:function(){var t=this,e=this.$contracts["BHB"===this.TokenName?"BHBToken":"USDTToken"];e.methods.approve(this.$contracts.Govern._address,this.amount.toBN().times(10).toFixed().toWei()).send({from:this.$address}).on("transactionHash",(function(e){t.tradeState="approving"})).on("receipt",function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.init(),a["a"].success(t.$t("destroyMining.text10")),t.tradeState="none";case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){t.tradeState="none"}))},burnBHTCastingForce:function(){var t=this;if(this.amount<=0)return a["a"].fail(this.$t("destroyMining.text11"));if(this.balance.toBN().lt(this.amount))return a["a"].fail(this.$t("destroyMining.text12"));if(!this.$web3.utils.isAddress(this.toAddress))return a["a"].fail(this.$t("destroyMining.text13"));if("BHB"==this.TokenName){if(this.allowance.lt(this.amount))return this.approve()}else if(this.allowanceusdt.lt(this.amount))return this.approve();console.log(this.tokenAddress),console.log(this.amount.toWei()),console.log(this.toAddress);var e=this.$contracts.Govern.methods.castingForce(this.tokenAddress,this.amount.toWei(),this.toAddress);e.call({from:this.$address},(function(n,s){n||e.send({from:t.$address}).on("transactionHash",(function(e){t.tradeState="trading"})).on("receipt",(function(e){t.init(),t.$emit("reload"),a["a"].success(t.$t("destroyMining.text14")),t.amount="",t.power=0,t.tradeState="none"})).on("error",(function(e){t.tradeState="none"}))}))},init:function(){var t=this;this.toAddress=this.$address,"BHB"==this.TokenName?this.$contracts.BHBToken.methods.balanceOf(this.$address).call({from:this.$address},(function(e,n){e||(t.balance=n.fromWei())})):this.$contracts.USDTToken.methods.balanceOf(this.$address).call({from:this.$address},(function(e,n){e||(t.balance=n.fromWei())})),this.$contracts.BHBToken.methods.allowance(this.$address,this.$contracts.Govern._address).call({from:this.$address},(function(e,n){e||(t.allowance=n.fromWei().toBN())})),this.$contracts.USDTToken.methods.allowance(this.$address,this.$contracts.Govern._address).call({from:this.$address},(function(e,n){e||(t.allowanceusdt=n.fromWei().toBN())}))}}},h=u,m=h,v=(n("4a6a"),n("2877")),f=Object(v["a"])(m,o,i,!1,null,"807369c0",null);e["default"]=f.exports}}]);
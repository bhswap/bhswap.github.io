(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12869052"],{"622a":function(t,e,s){"use strict";s("f7ad")},caad:function(t,e,s){"use strict";var a=s("23e7"),n=s("4d64").includes,i=s("44d2"),r=s("ae40"),o=r("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!o},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},f208:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-migrate"},[s("span",{staticClass:"title"},[t._v(t._s(t.$t("migrate.text1")))]),s("div",{staticClass:"note",class:{noMargin:t.noMargin}},[t._v(t._s(t.$t("migrate.text2")))]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:"none"===t.tradingStatus,expression:"tradingStatus === 'none'"}],staticClass:"double-button",class:{noMargin:t.noMargin},attrs:{disabled:t.isMigrated},on:{click:t.migrate}},[t._v(t._s(t.btnText))]),s("van-button",{directives:[{name:"show",rawName:"v-show",value:"none"!==t.tradingStatus,expression:"tradingStatus !== 'none'"}],staticClass:"double-button",class:{noMargin:t.noMargin},attrs:{loading:"","loading-text":t.btnText}})],1)},n=[],i=(s("caad"),s("b0c0"),s("96cf"),s("1da1")),r=s("ade3"),o=(s("66b9"),s("b650")),d={components:Object(r["a"])({},o["a"].name,o["a"]),data:function(){return{tradingStatus:"none",allowance:"0".toBN(),isMigrated:!1}},computed:{btnText:function(){return this.isMigrated?this.$t("migrate.text3"):"approving"===this.tradingStatus?this.$t("migrate.text4"):"trading"===this.tradingStatus?this.$t("migrate.text5"):this.allowance.lte(0)?this.$t("migrate.text6"):this.$t("migrate.text7")},noMargin:function(){return["en","ja","ko"].includes(this.$i18n.locale)}},created:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this,e=new this.$web3.BatchRequest,s=sessionStorage.getItem("displayed");e.add(this.$contracts.OldTokenBiggings.methods.userPoolInfo(1,this.$address).call.request({from:this.$address})),e.add(this.$contracts.OldTokenBiggings.methods.earned(0,this.$address).call.request({from:this.$address})),e.add(this.$contracts.OldTokenBiggings.methods.earned(1,this.$address).call.request({from:this.$address})),e.add(this.$contracts.OldTokenBiggings.methods.earned(2,this.$address).call.request({from:this.$address})),e.add(this.$contracts.OldBHBToken.methods.balanceOf(this.$address).call.request({from:this.$address})),e.add(this.$contracts.OldBHBToken.methods.allowance(this.$address,this.$contracts.BhSwapMigrations.options.address).call.request({from:this.$address})),e.requestManager.sendBatch(e.requests,(function(e,a){if(!e){var n=("string"==typeof a[0]?a[0]:a[0].result).decode([{type:"uint256",name:"supply"},{type:"uint256",name:"reward"},{type:"uint256",name:"taked"},{type:"uint256",name:"rewardDebt"}]),i=a[1].result.toBN(),r=a[2].result.toBN(),o=a[3].result.toBN(),d=a[4].result.toBN();t.isMigrated=d.plus(i).plus(r).plus(o).plus(n.supply).lte(0),t.allowance=a[5].result.toBN(),s||t.isMigrated||(t.$store.commit("showPopup","migrate"),sessionStorage.setItem("displayed","true"))}}))},approve:function(){var t=this;this.$contracts.OldBHBToken.methods.approve(this.$contracts.BhSwapMigrations.options.address,"2100000".toWei()).send({from:this.$address}).on("transactionHash",(function(e){t.tradingStatus="approving"})).on("receipt",function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$contracts.OldBHBToken.methods.allowance(t.$address,t.$contracts.BhSwapMigrations.options.address).call({from:t.$address});case 2:t.allowance=e.sent.toBN(),t.tradingStatus="none";case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){t.tradingStatus="none"}))},migrate:function(){var t=this;if(this.allowance.lte(0))return this.approve();var e=this.$contracts.BhSwapMigrations.methods.migrate();e.call({from:this.$address},(function(s,a){s||e.send({from:t.$address}).on("transactionHash",(function(e){t.tradingStatus="trading"})).on("receipt",(function(e){t.tradingStatus="none",t.init()})).on("error",(function(e){t.tradingStatus="none"}))}))}}},c=d,u=c,l=(s("622a"),s("2877")),h=Object(l["a"])(u,a,n,!1,null,"818b1c92",null);e["default"]=h.exports},f7ad:function(t,e,s){}}]);
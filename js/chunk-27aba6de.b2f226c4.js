(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27aba6de"],{"622a":function(t,s,e){"use strict";e("f7ad")},f208:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"data-migrate"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("migrate.text1")))]),e("div",{staticClass:"note",class:{noMargin:t.noMargin}},[t._v(t._s(t.$t("migrate.text2")))]),e("van-button",{directives:[{name:"show",rawName:"v-show",value:"none"===t.tradingStatus,expression:"tradingStatus === 'none'"}],staticClass:"double-button",class:{noMargin:t.noMargin},attrs:{disabled:t.isMigrated},on:{click:t.migrate}},[t._v(t._s(t.btnText))]),e("van-button",{directives:[{name:"show",rawName:"v-show",value:"none"!==t.tradingStatus,expression:"tradingStatus !== 'none'"}],staticClass:"double-button",class:{noMargin:t.noMargin},attrs:{loading:"","loading-text":t.btnText}})],1)},n=[],i=(e("caad"),e("b0c0"),e("96cf"),e("1da1")),r=e("ade3"),o=(e("66b9"),e("b650")),d={components:Object(r["a"])({},o["a"].name,o["a"]),data:function(){return{tradingStatus:"none",allowance:"0".toBN(),isMigrated:!1}},computed:{btnText:function(){return this.isMigrated?this.$t("migrate.text3"):"approving"===this.tradingStatus?this.$t("migrate.text4"):"trading"===this.tradingStatus?this.$t("migrate.text5"):this.allowance.lte(0)?this.$t("migrate.text6"):this.$t("migrate.text7")},noMargin:function(){return["en","ja","ko"].includes(this.$i18n.locale)}},created:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this,s=new this.$web3.BatchRequest,e=sessionStorage.getItem("displayed");s.add(this.$contracts.OldTokenBiggings.methods.userPoolInfo(1,this.$address).call.request({from:this.$address})),s.add(this.$contracts.OldTokenBiggings.methods.earned(0,this.$address).call.request({from:this.$address})),s.add(this.$contracts.OldTokenBiggings.methods.earned(1,this.$address).call.request({from:this.$address})),s.add(this.$contracts.OldTokenBiggings.methods.earned(2,this.$address).call.request({from:this.$address})),s.add(this.$contracts.OldBHBToken.methods.balanceOf(this.$address).call.request({from:this.$address})),s.add(this.$contracts.OldBHBToken.methods.allowance(this.$address,this.$contracts.BhSwapMigrations.options.address).call.request({from:this.$address})),s.requestManager.sendBatch(s.requests,(function(s,a){if(!s){var n=("string"==typeof a[0]?a[0]:a[0].result).decode([{type:"uint256",name:"supply"},{type:"uint256",name:"reward"},{type:"uint256",name:"taked"},{type:"uint256",name:"rewardDebt"}]),i=a[1].result.toBN(),r=a[2].result.toBN(),o=a[3].result.toBN(),d=a[4].result.toBN();t.isMigrated=d.plus(i).plus(r).plus(o).plus(n.supply).lte(0),t.allowance=a[5].result.toBN(),e||t.isMigrated||(t.$store.commit("showPopup","migrate"),sessionStorage.setItem("displayed","true"))}}))},approve:function(){var t=this;this.$contracts.OldBHBToken.methods.approve(this.$contracts.BhSwapMigrations.options.address,"2100000".toWei()).send({from:this.$address}).on("transactionHash",(function(s){t.tradingStatus="approving"})).on("receipt",function(){var s=Object(i["a"])(regeneratorRuntime.mark((function s(e){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$contracts.OldBHBToken.methods.allowance(t.$address,t.$contracts.BhSwapMigrations.options.address).call({from:t.$address});case 2:t.allowance=s.sent.toBN(),t.tradingStatus="none";case 4:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}()).on("error",(function(s){t.tradingStatus="none"}))},migrate:function(){var t=this;if(this.allowance.lte(0))return this.approve();var s=this.$contracts.BhSwapMigrations.methods.migrate();s.call({from:this.$address},(function(e,a){e||s.send({from:t.$address}).on("transactionHash",(function(s){t.tradingStatus="trading"})).on("receipt",(function(s){t.tradingStatus="none",t.init()})).on("error",(function(s){t.tradingStatus="none"}))}))}}},c=d,u=c,l=(e("622a"),e("2877")),h=Object(l["a"])(u,a,n,!1,null,"818b1c92",null);s["default"]=h.exports},f7ad:function(t,s,e){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Redemption","chunk-2d0c2308"],{"1eac":function(t,e,n){"use strict";n("ab2b")},2532:function(t,e,n){"use strict";var i=n("23e7"),a=n("5a34"),o=n("1d80"),r=n("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(o(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"332e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"redemption"},[i("div",{staticClass:"box"},[i("div",{staticClass:"logos"},[i("div",[i("img",{attrs:{src:t.info.logo0}}),i("img",{attrs:{src:t.info.logo1}})]),i("span",[t._v(t._s(t.info.symbol0+"/"+t.info.symbol1))])]),i("div",{staticClass:"info"},[i("div",[i("span",[t._v(t._s(t.info.symbol0))]),i("span",[t._v(t._s(t.info.amount0.toFixed(6)))])]),i("div",[i("span",[t._v(t._s(t.info.symbol1))]),i("span",[t._v(t._s(t.info.amount1.toFixed(6)))])]),i("div",[i("span",[t._v(t._s(t.$t("redemption.text1")))]),i("span",{domProps:{textContent:t._s(t.info.lp.toFixed(6))}})])]),i("div",{staticClass:"setting"},[i("span",[t._v(t._s(t.$t("redemption.text2")))]),i("span",[t._v(t._s(t.value)+"%")]),i("van-slider",{attrs:{"active-color":"#4891DF","inactive-color":"#E4E4E4"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),i("div",{staticClass:"steps"},[i("span",{on:{click:function(e){t.value=0}}},[t._v("0")]),i("span",{on:{click:function(e){t.value=25}}},[t._v("25%")]),i("span",{on:{click:function(e){t.value=50}}},[t._v("50%")]),i("span",{on:{click:function(e){t.value=75}}},[t._v("75%")]),i("span",{on:{click:function(e){t.value=100}}},[t._v("100%")])])],1),i("div",{staticClass:"rate"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.rateToggle,expression:"!rateToggle"}]},[t._v(t._s(t.$t("redemption.text3")+" 1 "+t.info.symbol0+"≈"+t.rate.toFixed(6)+" "+t.info.symbol1))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.rateToggle,expression:"rateToggle"}]},[t._v(t._s(t.$t("redemption.text3")+" 1 "+t.info.symbol1+"≈"+t.reRate.toFixed(6)+" "+t.info.symbol0))]),i("img",{attrs:{src:n("5605")},on:{click:function(e){t.rateToggle=!t.rateToggle}}})]),i("div",{staticClass:"coin"},[i("img",{attrs:{src:t.info.logo0}}),i("span",[t._v(t._s(t.amount0.toFixed(6)+" "+t.info.symbol0))])]),i("div",{staticClass:"coin"},[i("img",{attrs:{src:t.info.logo1}}),i("span",[t._v(t._s(t.amount1.toFixed(6)+" "+t.info.symbol1))])]),i("van-button",{on:{click:t.removeLiquidity}},[t._v(t._s(t.$t("redemption.text4")))])],1),i("redeem-state",{attrs:{amount0:t.amount0,amount1:t.amount1,symbol0:t.info.symbol0,symbol1:t.info.symbol1,lpAmount:t.lpAmount.toFixed(),tradeState:t.tradeState,rate:t.rate,reRate:t.reRate},on:{remove:t.removeLiquidity,close:function(e){return t.$router.back()}}})],1)},a=[],o=(n("caad"),n("b0c0"),n("a9e3"),n("b680"),n("d3b7"),n("2532"),n("96cf"),n("1da1")),r=n("5530"),s=n("ade3"),c=(n("66b9"),n("b650")),u=(n("68ef"),n("9617"),n("d282")),l=n("ea8e"),d=n("a142");function h(t){if(!Object(d["c"])(t))return t;if(Array.isArray(t))return t.map((function(t){return h(t)}));if("object"===typeof t){var e={};return Object.keys(t).forEach((function(n){e[n]=h(t[n])})),e}return t}var f,v=n("1325"),m=n("482d"),p=n("3875"),b=n("78eb"),g=Object(u["a"])("slider"),y=g[0],x=g[1],S=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},w=y({mixins:[p["a"],b["a"]],props:{disabled:Boolean,vertical:Boolean,range:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},value:{type:[Number,Array],default:0}},data:function(){return{dragStatus:""}},computed:{scope:function(){return this.max-this.min},buttonStyle:function(){if(this.buttonSize){var t=Object(l["a"])(this.buttonSize);return{width:t,height:t}}}},created:function(){this.updateValue(this.value)},mounted:function(){this.range?(this.bindTouchEvent(this.$refs.wrapper0),this.bindTouchEvent(this.$refs.wrapper1)):this.bindTouchEvent(this.$refs.wrapper)},methods:{onTouchStart:function(t){this.disabled||(this.touchStart(t),this.currentValue=this.value,this.range?this.startValue=this.value.map(this.format):this.startValue=this.format(this.value),this.dragStatus="start")},onTouchMove:function(t){if(!this.disabled){"start"===this.dragStatus&&this.$emit("drag-start"),Object(v["c"])(t,!0),this.touchMove(t),this.dragStatus="draging";var e=this.$el.getBoundingClientRect(),n=this.vertical?this.deltaY:this.deltaX,i=this.vertical?e.height:e.width,a=n/i*this.scope;this.range?this.currentValue[this.index]=this.startValue[this.index]+a:this.currentValue=this.startValue+a,this.updateValue(this.currentValue)}},onTouchEnd:function(){this.disabled||("draging"===this.dragStatus&&(this.updateValue(this.currentValue,!0),this.$emit("drag-end")),this.dragStatus="")},onClick:function(t){if(t.stopPropagation(),!this.disabled){var e=this.$el.getBoundingClientRect(),n=this.vertical?t.clientY-e.top:t.clientX-e.left,i=this.vertical?e.height:e.width,a=+this.min+n/i*this.scope;if(this.range){var o=this.value,r=o[0],s=o[1],c=(r+s)/2;a<=c?r=a:s=a,a=[r,s]}this.startValue=this.value,this.updateValue(a,!0)}},handleOverlap:function(t){return t[0]>t[1]?(t=h(t),t.reverse()):t},updateValue:function(t,e){t=this.range?this.handleOverlap(t).map(this.format):this.format(t),S(t,this.value)||this.$emit("input",t),e&&!S(t,this.startValue)&&this.$emit("change",t)},format:function(t){var e=+this.min,n=+this.max,i=+this.step;t=Object(m["c"])(t,e,n);var a=Math.round((t-e)/i)*i;return Object(m["a"])(e,a)}},render:function(){var t,e,n=this,i=arguments[0],a=this.vertical,o=a?"height":"width",r=a?"width":"height",s=(t={background:this.inactiveColor},t[r]=Object(l["a"])(this.barHeight),t),c=function(){var t=n.value,e=n.min,i=n.range,a=n.scope;return i?100*(t[1]-t[0])/a+"%":100*(t-e)/a+"%"},u=function(){var t=n.value,e=n.min,i=n.range,a=n.scope;return i?100*(t[0]-e)/a+"%":null},d=(e={},e[o]=c(),e.left=this.vertical?null:u(),e.top=this.vertical?u():null,e.background=this.activeColor,e);this.dragStatus&&(d.transition="none");var h=function(t){var e=["left","right"],a="number"===typeof t,o=a?n.value[t]:n.value,r=function(){return a?"button-wrapper-"+e[t]:"button-wrapper"},s=function(){return a?"wrapper"+t:"wrapper"},c=function(){if(a){var e=n.slots(0===t?"left-button":"right-button",{value:o});if(e)return e}return n.slots("button")?n.slots("button"):i("div",{class:x("button"),style:n.buttonStyle})};return i("div",{ref:s(),attrs:{role:"slider",tabindex:n.disabled?-1:0,"aria-valuemin":n.min,"aria-valuenow":n.value,"aria-valuemax":n.max,"aria-orientation":n.vertical?"vertical":"horizontal"},class:x(r()),on:{touchstart:function(){a&&(n.index=t)},click:function(t){return t.stopPropagation()}}},[c()])};return i("div",{style:s,class:x({disabled:this.disabled,vertical:a}),on:{click:this.onClick}},[i("div",{class:x("bar"),style:d},[this.range?[h(0),h(1)]:h()])])}}),B=n("b9cc"),O=n("2f62"),_=n("01b1"),$={components:(f={},Object(s["a"])(f,w.name,w),Object(s["a"])(f,c["a"].name,c["a"]),Object(s["a"])(f,"redeem-state",(function(){return n.e("chunk-b957906c").then(n.bind(null,"edba"))})),f),data:function(){return{info:null,rate:"0",reRate:"0",rateToggle:!1,contract:null,allowance:"0".toBN(),value:25,tradeState:"none"}},computed:Object(r["a"])(Object(r["a"])({},Object(O["b"])(["deadline","chainId"])),{},{lpAmount:function(){return this.info.lp.toWei().toBN().div(100).times(this.value)},amount0:function(){return this.info.amount0.toBN().div(100).times(this.value).toFixed()},amount1:function(){return this.info.amount1.toBN().div(100).times(this.value).toFixed()}}),created:function(){var t=JSON.parse(this.$route.query.info),e=t.decimals0,n=t.decimals1,i=t.reserve0,a=t.reserve1,o=t.address,r="1".toWei(e).toBN().times(a).div(i).toFixed(0).fromWei(n),s="1".toWei(n).toBN().times(i).div(a).toFixed(0).fromWei(e);this.info=JSON.parse(this.$route.query.info),this.rate=Number(r)||"<0.000001",this.reRate=Number(s)||"<0.000001",this.contract=new this.$web3.eth.Contract(B,o),this.init()},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.info,i=n.symbol0,a=n.symbol1,o=t.$contracts[[i,a].includes("BHB")?"BHBToken":"Router"].options.address,e.next=4,t.contract.methods.allowance(t.$address,o).call({from:t.$address});case 4:t.allowance=e.sent.toBN();case 5:case"end":return e.stop()}}),e)})))()},approve:function(){var t=this,e=this.info,n=e.symbol0,i=e.symbol1,a=this.$contracts[[n,i].includes("BHB")?"BHBToken":"Router"].options.address;this.contract.methods.approve(a,this.lpAmount.times(10).toFixed(0)).send({from:this.$address}).on("transactionHash",(function(e){t.tradeState="approve"})).on("receipt",function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:t.tradeState="approved";case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){t.tradeState="none"}))},removeLiquidity:function(){var t=this,e=this.info,n=e.address0,i=e.address1,a=e.decimals0,o=e.decimals1,r=e.symbol0,s=e.symbol1,c=_["a"][this.chainId].mainCoin;if(this.allowance.lt(this.lpAmount))return this.approve();if([r,s].includes(c.symbol))return this.removeLiquidityETH();var u=Math.floor((new Date).getTime()/1e3)+Number(this.deadline),l=[r,s].includes("BHB")?this.$contracts.BHBToken:this.$contracts.Router;l.methods.removeLiquidity(n,i,this.lpAmount.toFixed(0),this.amount0.toWei(a).toBN().times(.99).toFixed(0),this.amount1.toWei(o).toBN().times(.99).toFixed(0),this.$address,u).send({from:this.$address}).on("transactionHash",(function(e){t.tradeState="in"})).on("receipt",(function(e){t.tradeState="done"})).on("error",(function(e){t.tradeState="none"}))},removeLiquidityETH:function(){var t=this,e=Math.floor((new Date).getTime()/1e3)+Number(this.deadline),n=_["a"][this.chainId].mainCoin,i=this.info,a=i.symbol0,o=i.symbol1,r=Number(a!==n.symbol),s=Number(!r),c=[a,o].includes("BHB")?this.$contracts.BHBToken:this.$contracts.Router;c.methods.removeLiquidityETH(this.info["address".concat(s)],this.lpAmount.toFixed(0),this["amount".concat(s)].toWei(this.info["decimals".concat(s)]).toBN().times(.99).toFixed(0),this["amount".concat(r)].toWei(this.info["decimals".concat(r)]).toBN().times(.99).toFixed(0),this.$address,e).send({from:this.$address}).on("transactionHash",(function(e){t.tradeState="in"})).on("receipt",(function(e){t.tradeState="done"})).on("error",(function(e){t.tradeState="none"}))}}},k=$,T=k,N=(n("1eac"),n("babd"),n("2877")),j=Object(N["a"])(T,i,a,!1,null,"03ce8898",null);e["default"]=j.exports},"44e7":function(t,e,n){var i=n("861d"),a=n("c6b6"),o=n("b622"),r=o("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},"482d":function(t,e,n){"use strict";function i(t,e,n){return Math.min(Math.max(t,e),n)}function a(t,e,n){var i=t.indexOf(e),a="";return-1===i?t:"-"===e&&0!==i?t.slice(0,i):("."===e&&t.match(/^(\.|-\.)/)&&(a=i?"-0":"0"),a+t.slice(0,i+1)+t.slice(i).replace(n,""))}function o(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),t=e?a(t,".",/\./g):t.split(".")[0],t=n?a(t,"-",/-/g):t.replace(/-/,"");var i=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(i,"")}function r(t,e){var n=Math.pow(10,10);return Math.round((t+e)*n)/n}n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r}))},"48f4":function(t,e,n){"use strict";function i(t){return"NavigationDuplicated"===t.name||t.message&&-1!==t.message.indexOf("redundant navigation")}function a(t,e){var n=e.to,a=e.url,o=e.replace;if(n&&t){var r=t[o?"replace":"push"](n);r&&r.catch&&r.catch((function(t){if(t&&!i(t))throw t}))}else a&&(o?location.replace(a):location.href=a)}function o(t){a(t.parent&&t.parent.$router,t.props)}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));var r={url:String,replace:Boolean,to:[String,Object]}},5605:function(t,e,n){t.exports=n.p+"img/icon-exchange.70b56ba8.svg"},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"66b9":function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("e3b3"),n("bc1b")},"78eb":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},9617:function(t,e,n){},ab13:function(t,e,n){var i=n("b622"),a=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(i){}}return!1}},ab2b:function(t,e,n){},b1d2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i="van-hairline",a=i+"--surround"},b650:function(t,e,n){"use strict";var i=n("1988"),a=n("2638"),o=n.n(a),r=n("d282"),s=n("ba31"),c=n("b1d2"),u=n("48f4"),l=n("ad06"),d=n("543e"),h=Object(r["a"])("button"),f=h[0],v=h[1];function m(t,e,n,i){var a,r=e.tag,h=e.icon,f=e.type,m=e.color,p=e.plain,b=e.disabled,g=e.loading,y=e.hairline,x=e.loadingText,S=e.iconPosition,w={};function B(t){e.loading&&t.preventDefault(),g||b||(Object(s["a"])(i,"click",t),Object(u["a"])(i))}function O(t){Object(s["a"])(i,"touchstart",t)}m&&(w.color=p?m:"white",p||(w.background=m),-1!==m.indexOf("gradient")?w.border=0:w.borderColor=m);var _=[v([f,e.size,{plain:p,loading:g,disabled:b,hairline:y,block:e.block,round:e.round,square:e.square}]),(a={},a[c["b"]]=y,a)];function $(){return g?n.loading?n.loading():t(d["a"],{class:v("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}}):n.icon?t("div",{class:v("icon")},[n.icon()]):h?t(l["a"],{attrs:{name:h,classPrefix:e.iconPrefix},class:v("icon")}):void 0}function k(){var i,a=[];return"left"===S&&a.push($()),i=g?x:n.default?n.default():e.text,i&&a.push(t("span",{class:v("text")},[i])),"right"===S&&a.push($()),a}return t(r,o()([{style:w,class:_,attrs:{type:e.nativeType,disabled:b},on:{click:B,touchstart:O}},Object(s["b"])(i)]),[t("div",{class:v("content")},[k()])])}m.props=Object(i["a"])({},u["b"],{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"},iconPosition:{type:String,default:"left"}}),e["a"]=f(m)},babd:function(t,e,n){"use strict";n("eea5")},bc1b:function(t,e,n){},eea5:function(t,e,n){}}]);